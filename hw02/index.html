<!DOCTYPE html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title></title><style type=text/css>@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@300&family=Noto+Serif+JP:wght@200&display=swap);body{font-size:18pt}div{border:#000 solid 1px;margin:10px;padding:10px}svg{border:red solid 1px;font-size:36pt}li{font-size:12pt;font-family:'Noto Sans Mono','Noto Serif JP'}.selected{stroke:red;stroke-width:5px}.font-svg{height:100px;width:100px}</style></head><body><div id=score-btn></div><hr><a href=https://en.wikipedia.org/wiki/Plane_(Unicode)>Unicode 字元平面 Plane</a><p>Unicode 分為 17 平面（Plane），每平面擁有 65,536（2^16）個代碼點。</p><ol start=0><li>U+000000 - U+00FFFF 基本多文種平面 Basic Multilingual Plane (BMP)</li><li>U+010000 - U+01FFFF 第一輔助平面 (多文種補充平面 ) Supplementary Multilingual Plane (SMP)</li><li>U+020000 - U+02FFFF 第二輔助平面 (表意文字補充平面) Supplementary Ideographic Plane (SIP)</li><li>U+030000 - U+03FFFF 第三輔助平面 (表意文字第三平面) Tertiary Ideographic Plane (TIP)</li><li>U+040000 - U+05FFFF（尚未使用）</li><li>U+050000 - U+06FFFF（尚未使用）</li><li>U+060000 - U+07FFFF（尚未使用）</li><li>U+070000 - U+08FFFF（尚未使用）</li><li>U+080000 - U+09FFFF（尚未使用）</li><li>U+090000 - U+0AFFFF（尚未使用）</li><li>U+0A0000 - U+0BFFFF（尚未使用）</li><li>U+0B0000 - U+0CFFFF（尚未使用）</li><li>U+0C0000 - U+0DFFFF（尚未使用）</li><li>U+040000 - U+0DFFFF（尚未使用）</li><li>U+0E0000 - U+0EFFFF 特別用途補充平面 Supplementary Special-purpose Plane (SSP)</li><li>U+0F0000 - U+0FFFFF 保留作為私人使用區（A區）[1] Private Use Area-A (PUA-A)</li><li>U+100000 - U+10FFFF 保留作為私人使用區（B區）[1] Private Use Area-B (PUA-B)</li></ol><hr><div id=planes></div><hr><div id=plane_now>BMP, plane_select = 0</div><hr><div id=plane></div><hr><div><div><input type=file id=select-font></div><div><a href=javascript:void(0) id=download-svg>Download</a></div><div><label for=point-switch>Show Points</label> <input type=checkbox id=point-switch checked=checked></div><div id=svg_image style=display:inline-block;height:15rem;width:10%></div><div style=display:inline-block;height:15rem;width:70%;float:right><textarea id=svg_text style=height:100%;width:100%></textarea></div><div style=clear:both;padding:0;border:0></div></div><hr>Surrogates:<ul><li>High Surrogates (D800–DB7F) 896</li><li>High Private Use Surrogates (DB80–DBFF) 128</li><li>Low Surrogates (DC00–DFFF) 1024</li></ul>Since high surrogate values in the range DB80–DBFF always produce values in the Private Use planes, the high surrogate range can be further divided into (normal) high surrogates (D800–DB7F) and "high private use surrogates" (DB80–DBFF).<hr><script src=https://d3js.org/d3.v4.min.js charset=utf-8></script><script src=./opentype.min.js></script><script src=./MyPath.js></script><script src=https://cdn.jsdelivr.net/gh/t109598105/ScoreOutputer@latest/dist/scoreoutputer.min.js></script><script type=text/javascript>var openTypeFont=null,svgHTML="",plane_select=0,code_point=0,target_code_point=0,unicode=["BMP","SMP","SIP","TIP","4","5","6","7","8","9","10","11","12","13","SSP","PUA-A","PUA-B"],getHexUnicode=function(){for(var t=target_code_point.toString(16);t.length<4;)t="0"+t;return t};function create_font_svg(){var t,e,n,o,r,l;console.log("start create_font_svg()..."),target_code_point=code_point,null!==openTypeFont&&(d3.select("#svg_image").html(""),d3.select("#svg_text").html(""),e=String.fromCodePoint(code_point),n=(o=function(e,n){var o=new MyPath,r=[];for(let t=0;t<e.length;t+=1){var l=e[t];"M"===l.type?(o.moveTo(l.x,n-l.y),r.push([l.x,n-l.y])):"L"===l.type?(o.lineTo(l.x,n-l.y),r.push([l.x,n-l.y])):"Q"===l.type?(o.quadraticCurveTo(l.x1,n-l.y1,l.x,n-l.y),r.push([l.x1,n-l.y1]),r.push([l.x,n-l.y])):"C"===l.type?(o.curveTo(l.x1,n-l.y1,l.x2,n-l.y2,l.x,n-l.y),r.push([l.x1,n-l.y1]),r.push([l.x2,n-l.y2]),r.push([l.x,n-l.y])):"Z"===l.type&&o.closePath()}return[o,r]}((e=(t=openTypeFont).stringToGlyphs(e)[0]).path.commands,t.unitsPerEm))[0],o=o[1],(r=d3.select("#svg_image").append("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:svg","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("viewBox",[0,-e.yMin,t.unitsPerEm,t.unitsPerEm].join(" "))).append("path").attr("d",n.toPathData()).attr("class","font-svg"),d3.select("#svg_text").html(r.node().outerHTML),document.createElementNS("http://www.w3.org/2000/svg","path"),(l=r.append("g").attr("id","point-graph").attr("display",d3.select("#point-switch").property("checked")?"":"none")).selectAll("circle").data(o).enter().append("circle").attr("stroke","black").attr("fill","red").attr("r",30).attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),svgHTML=r.node().outerHTML,d3.select("#point-switch").on("change",function(){l.attr("display",d3.select(this).property("checked")?"":"none"),svgHTML=r.node().outerHTML,d3.select("#svg_text").html(svgHTML)})),console.log("end create_font_svg()...")}function build_plane(){console.log("start build_plane()...");var t=new Array(65535).fill(),e=d3.select("#plane").append("svg").attr("id","svg").attr("width",1024).attr("height",1024).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:svg","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink");e.selectAll("rect").data(t).enter().append("rect").attr("x",function(t,e){return e%256*4}).attr("y",function(t,e){return 4*Math.floor(e/256)}).attr("width",8).attr("height",8).attr("fill",function(t,e){var n="rgb("+0..toString()+", "+(255-2*Math.floor(e/256)).toString()+", "+(255-e%256).toString()+")",e=65536*plane_select+e;return 55296<=e&&e<=56191?n="red":56192<=e&&e<=56319?n="yellow":56320<=e&&e<=57343&&(n="cyan"),n}).on("click",function(t){var n=d3.mouse(this);d3.select("#tooltip_click").remove(),e.append("text").text("0x"+"000000".substr(code_point.toString(16).length)+code_point.toString(16)+", "+code_point.toString()+", "+String.fromCodePoint(code_point)).attr("x",function(t,e){return n[0]+8}).attr("y",function(t,e){return Math.floor(n[1])+64}).attr("fill","#ff0").attr("font-size","24pt").attr("id","tooltip_click"),d3.select(this).attr("fill","orange"),create_font_svg()}).on("mouseover",function(t){var n=d3.mouse(this);code_point=65536*plane_select+256*Math.floor(n[1]/4)+Math.floor(n[0]/4),code_point=Math.max(0,code_point),e.append("text").text("0x"+"000000".substr(code_point.toString(16).length)+code_point.toString(16)+", "+code_point.toString()+", "+String.fromCodePoint(code_point)).attr("x",function(t,e){return n[0]+8}).attr("y",function(t,e){return Math.floor(n[1])+64}).attr("fill","#ff0").attr("font-size","24pt").attr("id","tooltip"),d3.select(this).attr("fill","orange")}).on("mouseout",function(t){d3.select("#tooltip").remove()}).append("title").text(function(t,e){var n=65536*plane_select;return"0x"+"000000".substr((n+e).toString(16).length)+(n+e).toString(16)+", "+(n+e)+", "+String.fromCodePoint(n+e)}),console.log("end build_plane()...")}function build_plane_selection(){console.log("start build_plane_selection()...");var n=d3.select("#planes").append("svg").attr("viewBox","0 0 1500 100").attr("style","width: 100%;height: 100%").attr("id","svgplanes").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:svg","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),o=Math.floor(1364/17),r=null;n.selectAll("rect").data(unicode).enter().append("rect").attr("class","unicode_planes").classed("selected",function(t,e){return e==plane_select&&(r=d3.select(this),!0)}).attr("id",function(t,e){return"plane"+e}).attr("x",function(t,e){return 8+e*o+8*e}).attr("y",8).attr("width",o).attr("height",o).attr("fill",function(t,e){return"rgb("+0..toString()+", "+(e%17*16).toString()+", "+(e%17*16).toString()+")"}).on("mousemove",function(){var t=parseInt(d3.mouse(this)[0]),e=parseInt(d3.mouse(this)[1]);d3.select("#tooltip_planes").remove(),n.append("text").attr("id","tooltip_planes").attr("x",t+24).attr("y",e).attr("text-anchor","middle").attr("font-family","sans-serif").attr("font-size","11px").attr("font-weight","bold").attr("fill","white").text(t+", "+e)}).on("mouseout",function(){d3.select("#tooltip_planes").remove()}).on("click",function(t,e){plane_select=unicode.indexOf(t),r.classed("selected",!1),r=d3.select("#plane"+plane_select).classed("selected",!0),console.log(e+", "+plane_select+", "+t),d3.select("#plane_now").html(e+", plane_select = "+plane_select),d3.select("#svg").remove(),build_plane()}),n.selectAll("text").data(unicode).enter().append("text").text(function(t){return t}).attr("x",function(t,e){return 16+e*o+8*e}).attr("y",32).attr("fill","#ff0").attr("font-size","12pt"),console.log("end build_plane_selection()...")}d3.select(window).on("load",function(){build_plane_selection(),build_plane(),d3.request("./SourceHanSerif-Heavy.ttf").responseType("arraybuffer").get(function(t){openTypeFont=opentype.parse(t.response)}),d3.select("#select-font").on("change",function(){if("ttf"!=this.files[0].name.split(".").slice(-1)[0])return console.error("Not a valid ttf file");var t=new FileReader;t.onload=function(){openTypeFont=opentype.parse(t.result)},t.readAsArrayBuffer(this.files[0])}),d3.select("#download-svg").on("click",function(){var t=d3.create("a").attr("href",URL.createObjectURL(new Blob([svgHTML],{type:"text/plain"}))).attr("download",getHexUnicode()+".svg");t.node().click(),setTimeout(function(){URL.revokeObjectURL(t.attr("href"))},50)})});var so=new ScoreOutputer("109598105");so.installCSS(function(){so.addChild("字型檔手動讀取",6,!1),so.addChild("字型檔自動讀取",2,!1),so.addChild("字型描點",2,!1),so.renderModal(document.body,"rgba(100,45,58,1)","white","15pt","15px","自我評分表"),so.installDownloadBtn(),so.renderBtn(d3.select("#score-btn").node(),"開啟自評表")})</script></body></html>